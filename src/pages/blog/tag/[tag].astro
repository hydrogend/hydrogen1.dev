---
import type { GetStaticPaths } from "astro";
import { allTags, getBlogPostsByTag } from "@/content";
import Base from "@/layouts/Base.astro";

export const getStaticPaths = (() => {
    return allTags.map(({tag}) => {
        return {
            params: { tag: tag },
            props: { tagName: tag, posts: getBlogPostsByTag(tag) }
        };
    });
}) satisfies GetStaticPaths;

const { tagName, posts } = Astro.props;
posts.sort((a, b) => b.data.post.valueOf() - a.data.post.valueOf());
---

<Base title={`Tag for ${tagName}`} type="website">
    <h1 class="text-center">{tagName} {posts.length}件の記事</h1>
    <ul class="list-inside list-disc mt-4">
        {posts.map((post) => (
            <li>
                <a href={`/blog/${post.slug}`} class="underline hover:opacity-75">
                    {post.data.title}
                </a>
            </li>
        ))}
    </ul>